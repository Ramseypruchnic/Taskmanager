<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multi-Business Task Manager</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { 
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; 
            background: #f3f4f6; 
            line-height: 1.6;
        }
        .container { max-width: 1200px; margin: 0 auto; padding: 1rem; }
        .card { 
            background: white; 
            border-radius: 0.5rem; 
            box-shadow: 0 1px 3px rgba(0,0,0,0.1); 
            padding: 1.5rem; 
            margin-bottom: 1.5rem; 
        }
        .header { 
            background: white; 
            padding: 1.5rem; 
            border-radius: 0.5rem; 
            box-shadow: 0 1px 3px rgba(0,0,0,0.1); 
            margin-bottom: 1.5rem; 
        }
        .nav { display: flex; gap: 1rem; margin-top: 1rem; }
        .nav-btn { 
            padding: 0.5rem 1rem; 
            border: none; 
            border-radius: 0.5rem; 
            cursor: pointer; 
            font-weight: 500;
            transition: all 0.2s;
        }
        .nav-btn.active { background: #3b82f6; color: white; }
        .nav-btn:not(.active) { background: #e5e7eb; color: #374151; }
        .nav-btn:hover:not(.active) { background: #d1d5db; }
        
        .input-group { margin-bottom: 1rem; }
        .input-group label { display: block; font-weight: 500; margin-bottom: 0.5rem; color: #374151; }
        .text-input { 
            width: 100%; 
            padding: 0.75rem; 
            border: 2px solid #d1d5db; 
            border-radius: 0.5rem; 
            font-size: 1rem;
            transition: border-color 0.2s;
        }
        .text-input:focus { outline: none; border-color: #3b82f6; }
        
        .radio-group { display: flex; gap: 1rem; flex-wrap: wrap; }
        .radio-item { display: flex; align-items: center; gap: 0.5rem; cursor: pointer; }
        .radio-item input { width: 1rem; height: 1rem; }
        
        .btn { 
            padding: 0.75rem 1.5rem; 
            border: none; 
            border-radius: 0.5rem; 
            cursor: pointer; 
            font-weight: 500;
            transition: all 0.2s;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }
        .btn-primary { background: #3b82f6; color: white; }
        .btn-primary:hover { background: #2563eb; }
        .btn-secondary { background: #6b7280; color: white; }
        .btn-secondary:hover { background: #4b5563; }
        .btn-danger { background: #ef4444; color: white; }
        .btn-danger:hover { background: #dc2626; }
        .btn-sm { padding: 0.25rem 0.5rem; font-size: 0.875rem; }
        
        .task-item { 
            border: 2px solid #e5e7eb; 
            border-radius: 0.5rem; 
            padding: 1rem; 
            margin-bottom: 0.5rem;
            display: flex;
            align-items: flex-start;
            gap: 0.75rem;
        }
        .task-item.personal { border-color: #bfdbfe; background: #eff6ff; }
        .task-item.strategylabs { border-color: #c4b5fd; background: #f3f4f6; }
        .task-item.unomas { border-color: #fed7aa; background: #fff7ed; }
        
        .checkbox { 
            width: 1.25rem; 
            height: 1.25rem; 
            border: 2px solid #d1d5db; 
            border-radius: 0.25rem; 
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-top: 0.125rem;
        }
        .checkbox.checked { background: #10b981; border-color: #10b981; color: white; }
        
        .task-content { flex: 1; }
        .task-text { margin-bottom: 0.5rem; }
        .task-text.completed { text-decoration: line-through; color: #6b7280; }
        .task-meta { display: flex; gap: 0.5rem; align-items: center; }
        .badge { 
            padding: 0.25rem 0.5rem; 
            border-radius: 0.25rem; 
            font-size: 0.75rem; 
            font-weight: 500; 
        }
        .badge-personal { background: #3b82f6; color: white; }
        .badge-strategylabs { background: #8b5cf6; color: white; }
        .badge-unomas { background: #f97316; color: white; }
        .badge-high { background: #fef2f2; color: #991b1b; }
        .badge-medium { background: #fefce8; color: #a16207; }
        .badge-low { background: #f3f4f6; color: #374151; }
        
        .task-actions { display: flex; gap: 0.25rem; }
        .icon-btn { 
            padding: 0.25rem; 
            border: none; 
            background: none; 
            cursor: pointer; 
            border-radius: 0.25rem;
            color: #6b7280;
        }
        .icon-btn:hover { background: #f3f4f6; }
        .icon-btn.primary { color: #3b82f6; }
        .icon-btn.danger { color: #ef4444; }
        
        .category-section { border: 1px solid #e5e7eb; border-radius: 0.5rem; margin-bottom: 1rem; }
        .category-header { 
            padding: 0.75rem; 
            background: #f9fafb; 
            border-bottom: 1px solid #e5e7eb; 
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        .category-header:hover { background: #f3f4f6; }
        .category-content { padding: 0.75rem; }
        
        .modal { 
            position: fixed; 
            top: 0; 
            left: 0; 
            right: 0; 
            bottom: 0; 
            background: rgba(0,0,0,0.5); 
            display: none;
            align-items: center; 
            justify-content: center; 
            z-index: 1000;
        }
        .modal.show { display: flex; }
        .modal-content { 
            background: white; 
            padding: 1.5rem; 
            border-radius: 0.5rem; 
            max-width: 500px; 
            width: 90%; 
            margin: 1rem;
        }
        .modal-actions { display: flex; gap: 0.75rem; margin-top: 1rem; }
        
        .grid { display: grid; gap: 1.5rem; }
        .grid-2 { grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); }
        
        .alert { 
            padding: 0.75rem; 
            border-radius: 0.5rem; 
            margin-bottom: 1rem; 
            border-left: 4px solid;
        }
        .alert-warning { background: #fefce8; border-color: #f59e0b; color: #92400e; }
        .alert-success { background: #f0fdf4; border-color: #10b981; color: #065f46; }
        
        .text-center { text-align: center; }
        .text-gray { color: #6b7280; }
        .text-lg { font-size: 1.125rem; }
        .font-bold { font-weight: 700; }
        .mb-4 { margin-bottom: 1rem; }
        .py-8 { padding: 2rem 0; }
        
        .hidden { display: none; }
        
        @media (max-width: 768px) {
            .container { padding: 0.5rem; }
            .nav { flex-wrap: wrap; }
            .radio-group { flex-direction: column; gap: 0.5rem; }
            .grid-2 { grid-template-columns: 1fr; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1 class="text-lg font-bold">Multi-Business Task Manager</h1>
            <div class="nav">
                <button class="nav-btn active" onclick="showView('capture')" id="capture-btn">üìù Capture & Organize</button>
                <button class="nav-btn" onclick="showView('daily')" id="daily-btn">üéØ Daily Focus</button>
            </div>
        </div>
        
        <div id="capture-view">
            <div class="card">
                <h2 class="font-bold mb-4">Quick Capture</h2>
                
                <div class="input-group">
                    <input type="text" id="task-input" class="text-input" placeholder="Enter your task here..." onkeydown="handleTaskInput(event)">
                </div>
                
                <div class="input-group">
                    <label>Category</label>
                    <div class="radio-group">
                        <label class="radio-item">
                            <input type="radio" name="category" value="personal" checked>
                            <span>Personal</span>
                        </label>
                        <label class="radio-item">
                            <input type="radio" name="category" value="strategylabs">
                            <span>Strategy Labs</span>
                        </label>
                        <label class="radio-item">
                            <input type="radio" name="category" value="unomas">
                            <span>Uno Mas</span>
                        </label>
                    </div>
                </div>
                
                <div class="input-group">
                    <label>Priority</label>
                    <div class="radio-group">
                        <label class="radio-item">
                            <input type="radio" name="priority" value="high">
                            <span class="badge badge-high">High</span>
                        </label>
                        <label class="radio-item">
                            <input type="radio" name="priority" value="medium" checked>
                            <span class="badge badge-medium">Medium</span>
                        </label>
                        <label class="radio-item">
                            <input type="radio" name="priority" value="low">
                            <span class="badge badge-low">Low</span>
                        </label>
                    </div>
                </div>
                
                <button class="btn btn-primary" onclick="addTask()">‚ûï Add Task</button>
            </div>
            
            <div class="card">
                <h2 class="font-bold mb-4">All Tasks (<span id="total-tasks">0</span>)</h2>
                <div id="tasks-container">
                    <p class="text-center text-gray py-8">No tasks yet. Start capturing your thoughts above!</p>
                </div>
            </div>
        </div>
        
        <div id="daily-view" class="hidden">
            <div class="card">
                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                    <h2 class="font-bold">Today's Focus (<span id="daily-count">0</span>/10 active tasks)</h2>
                    <div class="text-gray" id="current-date"></div>
                </div>
                
                <div id="daily-limit-warning" class="alert alert-warning hidden">
                    üìã Daily limit reached! Focus on completing tasks before adding more.
                </div>
                
                <div id="daily-tasks-container">
                    <div class="text-center py-8">
                        <p class="text-gray mb-4">No tasks selected for today.</p>
                        <button class="btn btn-primary" onclick="showView('capture')">Add Tasks from Capture</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <div id="completion-modal" class="modal">
        <div class="modal-content">
            <h3 class="font-bold mb-4">Daily Review</h3>
            <p id="completion-message" class="mb-4"></p>
            <div class="modal-actions">
                <button class="btn btn-primary" onclick="clearCompleted()">Clear Completed & Add New Tasks</button>
                <button class="btn btn-secondary" onclick="hideCompletionModal()">Keep All Tasks</button>
            </div>
        </div>
    </div>

    <script>
        // Global state
        let tasks = [];
        let dailyTasks = [];
        let currentView = 'capture';
        let editingTaskId = null;
        
        // Categories configuration
        const categories = {
            personal: { name: 'Personal', badge: 'badge-personal' },
            strategylabs: { name: 'Strategy Labs', badge: 'badge-strategylabs' },
            unomas: { name: 'Uno Mas', badge: 'badge-unomas' }
        };
        
        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            updateCurrentDate();
            renderTasks();
            renderDailyTasks();
        });
        
        function updateCurrentDate() {
            const now = new Date();
            const dateStr = now.toLocaleDateString('en-US', { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            });
            document.getElementById('current-date').textContent = dateStr;
        }
        
        function showView(view) {
            currentView = view;
            document.getElementById('capture-view').className = view === 'capture' ? '' : 'hidden';
            document.getElementById('daily-view').className = view === 'daily' ? '' : 'hidden';
            
            document.getElementById('capture-btn').className = view === 'capture' ? 'nav-btn active' : 'nav-btn';
            document.getElementById('daily-btn').className = view === 'daily' ? 'nav-btn active' : 'nav-btn';
            
            if (view === 'daily') {
                updateDailyView();
            }
        }
        
        function handleTaskInput(event) {
            if (event.key === 'Enter') {
                addTask();
            }
        }
        
        function addTask() {
            const input = document.getElementById('task-input');
            const text = input.value.trim();
            
            if (!text) return;
            
            const category = document.querySelector('input[name="category"]:checked').value;
            const priority = document.querySelector('input[name="priority"]:checked').value;
            
            const task = {
                id: Date.now(),
                text: text,
                category: category,
                priority: priority,
                completed: false,
                createdAt: new Date()
            };
            
            tasks.unshift(task);
            input.value = '';
            renderTasks();
        }
        
        function deleteTask(id) {
            tasks = tasks.filter(task => task.id !== id);
            dailyTasks = dailyTasks.filter(task => task.id !== id);
            renderTasks();
            renderDailyTasks();
        }
        
        function toggleTask(id) {
            const task = tasks.find(task => task.id === id);
            if (task) {
                task.completed = !task.completed;
                renderTasks();
            }
            
            const dailyTask = dailyTasks.find(task => task.id === id);
            if (dailyTask) {
                dailyTask.completed = !dailyTask.completed;
                renderDailyTasks();
                checkDailyLimit();
            }
        }
        
        function addToDaily(id) {
            const task = tasks.find(task => task.id === id);
            const activeDailyTasks = dailyTasks.filter(t => !t.completed);
            
            if (task && activeDailyTasks.length < 10 && !dailyTasks.find(t => t.id === id)) {
                dailyTasks.push({...task});
                renderDailyTasks();
                updateDailyView();
            }
        }
        
        function removeFromDaily(id) {
            dailyTasks = dailyTasks.filter(task => task.id !== id);
            renderDailyTasks();
            updateDailyView();
        }
        
        function renderTasks() {
            const container = document.getElementById('tasks-container');
            const totalTasks = tasks.length;
            
            document.getElementById('total-tasks').textContent = totalTasks;
            
            if (totalTasks === 0) {
                container.innerHTML = '<p class="text-center text-gray py-8">No tasks yet. Start capturing your thoughts above!</p>';
                return;
            }
            
            const tasksByCategory = {};
            Object.keys(categories).forEach(key => {
                tasksByCategory[key] = tasks.filter(task => task.category === key);
            });
            
            let html = '';
            Object.entries(tasksByCategory).forEach(([categoryKey, categoryTasks]) => {
                if (categoryTasks.length === 0) return;
                
                html += `
                    <div class="category-section">
                        <div class="category-header" onclick="toggleCategory('${categoryKey}')">
                            <div style="display: flex; align-items: center; gap: 0.75rem;">
                                <span style="width: 12px; height: 12px; border-radius: 50%; background: ${getCategoryColor(categoryKey)};"></span>
                                <span class="font-bold">${categories[categoryKey].name} (${categoryTasks.length})</span>
                            </div>
                            <span id="chevron-${categoryKey}">‚ñº</span>
                        </div>
                        <div class="category-content" id="content-${categoryKey}">
                            ${categoryTasks.map(task => renderTaskItem(task, true)).join('')}
                        </div>
                    </div>
                `;
            });
            
            container.innerHTML = html;
        }
        
        function renderDailyTasks() {
            const container = document.getElementById('daily-tasks-container');
            const activeTasks = dailyTasks.filter(task => !task.completed);
            const completedTasks = dailyTasks.filter(task => task.completed);
            
            document.getElementById('daily-count').textContent = activeTasks.length;
            
            if (dailyTasks.length === 0) {
                container.innerHTML = `
                    <div class="text-center py-8">
                        <p class="text-gray mb-4">No tasks selected for today.</p>
                        <button class="btn btn-primary" onclick="showView('capture')">Add Tasks from Capture</button>
                    </div>
                `;
                return;
            }
            
            let html = '';
            
            if (completedTasks.length > 0) {
                html += `
                    <div class="alert alert-success">
                        <h3 class="font-bold mb-4">‚úÖ Completed Today (${completedTasks.length})</h3>
                        ${completedTasks.map(task => renderTaskItem(task, false, true)).join('')}
                    </div>
                `;
            }
            
            if (activeTasks.length > 0) {
                const tasksByCategory = {};
                Object.keys(categories).forEach(key => {
                    tasksByCategory[key] = activeTasks.filter(task => task.category === key);
                });
                
                html += '<div class="grid grid-2">';
                Object.entries(tasksByCategory).forEach(([categoryKey, categoryTasks]) => {
                    if (categoryTasks.length === 0) return;
                    
                    html += `
                        <div>
                            <h3 class="font-bold mb-4" style="display: flex; align-items: center; gap: 0.5rem;">
                                <span style="width: 12px; height: 12px; border-radius: 50%; background: ${getCategoryColor(categoryKey)};"></span>
                                ${categories[categoryKey].name} (${categoryTasks.length})
                            </h3>
                            ${categoryTasks.map(task => renderTaskItem(task, false, true)).join('')}
                        </div>
                    `;
                });
                html += '</div>';
            }
            
            container.innerHTML = html;
        }
        
        function renderTaskItem(task, showAddButton = false, fromDaily = false) {
            const activeDailyCount = dailyTasks.filter(t => !t.completed).length;
            const canAddToDaily = activeDailyCount < 10 && !dailyTasks.find(t => t.id === task.id);
            
            return `
                <div class="task-item ${task.category}">
                    <div class="checkbox ${task.completed ? 'checked' : ''}" onclick="toggleTask(${task.id})">
                        ${task.completed ? '‚úì' : ''}
                    </div>
                    <div class="task-content">
                        <div class="task-text ${task.completed ? 'completed' : ''}">${task.text}</div>
                        <div class="task-meta">
                            <span class="badge ${categories[task.category].badge}">${categories[task.category].name}</span>
                            <span class="badge badge-${task.priority}">${task.priority.charAt(0).toUpperCase() + task.priority.slice(1)}</span>
                        </div>
                    </div>
                    <div class="task-actions">
                        ${showAddButton ? `
                            <button class="icon-btn primary ${!canAddToDaily ? 'hidden' : ''}" onclick="addToDaily(${task.id})" title="Add to daily tasks">
                                ‚ûï
                            </button>
                        ` : ''}
                        ${fromDaily ? `
                            <button class="icon-btn danger" onclick="removeFromDaily(${task.id})" title="Remove from daily">
                                ‚ùå
                            </button>
                        ` : `
                            <button class="icon-btn danger" onclick="deleteTask(${task.id})" title="Delete task">
                                üóëÔ∏è
                            </button>
                        `}
                    </div>
                </div>
            `;
        }
        
        function getCategoryColor(category) {
            const colors = {
                personal: '#3b82f6',
                strategylabs: '#8b5cf6',
                unomas: '#f97316'
            };
            return colors[category] || '#6b7280';
        }
        
        function toggleCategory(categoryKey) {
            const content = document.getElementById(`content-${categoryKey}`);
            const chevron = document.getElementById(`chevron-${categoryKey}`);
            
            if (content.style.display === 'none') {
                content.style.display = 'block';
                chevron.textContent = '‚ñº';
            } else {
                content.style.display = 'none';
                chevron.textContent = '‚ñ∂';
            }
        }
        
        function updateDailyView() {
            const activeTasks = dailyTasks.filter(task => !task.completed);
            const warning = document.getElementById('daily-limit-warning');
            
            if (activeTasks.length >= 10) {
                warning.classList.remove('hidden');
            } else {
                warning.classList.add('hidden');
            }
            
            renderDailyTasks();
        }
        
        function checkDailyLimit() {
            const completedToday = dailyTasks.filter(task => task.completed).length;
            const activeTasks = dailyTasks.filter(task => !task.completed);
            
            if (completedToday > 0 && activeTasks.length < 10) {
                showCompletionModal(completedToday, 10 - activeTasks.length);
            }
        }
        
        function showCompletionModal(completed, available) {
            const modal = document.getElementById('completion-modal');
            const message = document.getElementById('completion-message');
            
            message.textContent = `Great job! You completed ${completed} task(s) today. You can now add ${available} more task(s) to your daily focus.`;
            modal.classList.add('show');
        }
        
        function hideCompletionModal() {
            document.getElementById('completion-modal').classList.remove('show');
        }
        
        function clearCompleted() {
            dailyTasks = dailyTasks.filter(task => !task.completed);
            hideCompletionModal();
            updateDailyView();
        }
    </script>
</body>
</html>
